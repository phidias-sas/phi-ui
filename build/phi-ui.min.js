angular.module("phi.ui",["ngAria"]),angular.module("phi.ui").run(["$rootScope","$location",function(e,t){e.$location=t}]),angular.module("phi.ui").service("$phiCoordinates",["$timeout",function(e){return{getBounds:function(t,n){e.cancel(t.clearBoundsTimeout),t.clearBoundsTimeout=e(function(){t.data("phi-coordinates-bounds",null)},500);var i=t.data("phi-coordinates-bounds");if(!i){var o=t[0];n=n||o.offsetParent||document.body,n=n[0]||n;var l=o.getBoundingClientRect(),r=n.getBoundingClientRect();i={left:l.left-r.left,top:l.top-r.top,width:l.width,height:l.height,bottom:l.top-r.top+l.height},t.data("phi-coordinates-bounds",i)}return i},parseAlignmentString:function(e){if(void 0==e)return null;var t=null,n=null;return-1!=e.indexOf("center")&&(t="center",n="center"),-1!=e.indexOf("top")&&(t="top"),-1!=e.indexOf("bottom")&&(t="bottom"),-1!=e.indexOf("left")&&(n="left"),-1!=e.indexOf("right")&&(n="right"),t&&n?{vertical:t,horizontal:n}:null}}}]),angular.module("phi.ui").directive("phiTooltipFor",["$timeout","$phiCoordinates",function(e,t){return{restrict:"A",scope:{parentId:"@phiTooltipFor",align:"@phiTooltipAlign",origin:"@phiTooltipOrigin"},link:function(n,i,o){n.reposition=function(){i.css("position","absolute");var e=angular.element(document.getElementById(n.parentId)),l=t.getBounds(e),r=t.getBounds(i),a={top:0,left:0},c=t.parseAlignmentString(n.align)||{vertical:"bottom",horizontal:"left"};switch(c.vertical){case"top":a.top+=l.top;break;case"center":a.top+=l.top+l.height/2;break;case"bottom":a.top+=l.top+l.height}switch(c.horizontal){case"left":a.left+=l.left;break;case"center":a.left+=l.left+l.width/2;break;case"right":a.left+=l.left+l.width}var u=t.parseAlignmentString(n.origin)||{vertical:"top",horizontal:"left"};switch(u.vertical){case"bottom":a.top-=r.height;break;case"center":a.top-=r.height/2}switch(u.horizontal){case"right":a.left-=r.width;break;case"center":a.left-=r.width/2}var d={top:a.top+"px",left:a.left+"px",right:"auto",bottom:"auto"};"width"==o.phiTooltipMatch?d.minWidth=l.width+"px":"height"==o.phiTooltipMatch&&(d.minHeight=l.height+"px"),i.css(d)},o.$observe("phiVisible",function(){n.reposition()}),o.$observe("phiTooltipAlign",function(){n.reposition()}),o.$observe("phiTooltipOrigin",function(){n.reposition()}),e(function(){n.reposition(),n.$apply()},200)}}}]),angular.module("phi.ui").directive("phiViewportLeave",["$window","$phiCoordinates","$timeout",function(e,t){return{restrict:"A",link:function(n,i,o){var l=e.scrollY;angular.element(e).bind("scroll",function(){var r=t.getBounds(i),a=null;l<r.top&&r.top<=e.scrollY?a={direction:"up"}:l+e.innerHeight>r.bottom&&r.bottom>=e.scrollY+e.innerHeight&&(a={direction:"down"}),a&&(n.$eval(o.phiViewportLeave,{event:a}),n.$apply()),l=e.scrollY})}}}]),angular.module("phi.ui").directive("phiViewportLeaveEnd",["$window","$phiCoordinates","$timeout",function(e,t){return{restrict:"A",link:function(n,i,o){var l=e.scrollY;n.scrollListener=function(){var r=t.getBounds(i),a=null;l<r.bottom&&r.bottom<=e.scrollY?a={direction:"up"}:l+e.innerHeight>r.top&&r.top>=e.scrollY+e.innerHeight&&(a={direction:"down"}),a&&(n.$eval(o.phiViewportLeaveEnd,{event:a}),n.$apply()),l=e.scrollY},angular.element(e).bind("scroll",n.scrollListener),i.on("$destroy",function(){angular.element(e).unbind("scroll",n.scrollListener)})}}}]),angular.module("phi.ui").directive("phiViewportEnter",["$window","$phiCoordinates","$timeout",function(e,t){return{restrict:"A",link:function(n,i,o){var l=e.scrollY;angular.element(e).bind("scroll",function(){var r=t.getBounds(i),a=null;l+e.innerHeight<r.top&&r.top<=e.scrollY+e.innerHeight?a={direction:"up"}:l>r.bottom&&r.bottom>=e.scrollY&&(a={direction:"down"}),a&&(n.$eval(o.phiViewportEnter,{event:a}),n.$apply()),l=e.scrollY})}}}]),angular.module("phi.ui").directive("phiViewportEnterEnd",["$window","$phiCoordinates","$timeout",function(e,t){return{restrict:"A",link:function(n,i,o){var l=e.scrollY;angular.element(e).bind("scroll",function(){var r=t.getBounds(i),a=null;l+e.innerHeight<r.bottom&&r.bottom<=e.scrollY+e.innerHeight?a={direction:"up"}:l>r.top&&r.top>=e.scrollY&&(a={direction:"down"}),a&&(n.$eval(o.phiViewportEnterEnd,{event:a}),n.$apply()),l=e.scrollY})}}}]),angular.module("phi.ui").directive("phiGallery",["$timeout",function(){return{restrict:"A",scope:{controls:"=phiGallery",customClassName:"@phiGalleryShownClass"},link:function(e,t){var n=[];e.controls=void 0!=e.controls?e.controls:{},e.shownClass="phi-gallery-shown"+(e.customClassName?" "+e.customClassName:""),e.controls={selectedIndex:null,length:0,show:function(t){n.length&&(t=Math.min(Math.max(t,0),n.length),void 0!=n[t]&&(null!==e.controls.selectedIndex&&void 0!=n[e.controls.selectedIndex]&&angular.element(n[e.controls.selectedIndex]).removeClass(e.shownClass),angular.element(n[t]).addClass(e.shownClass),e.controls.selectedIndex=t))},next:function(){e.controls.show(e.controls.selectedIndex+1)},previous:function(){e.controls.show(e.controls.selectedIndex-1)},hasNext:function(){return void 0!=n[e.controls.selectedIndex+1]},hasPrevious:function(){return void 0!=n[e.controls.selectedIndex-1]}},e.$watch(function(){n=t.children(),e.controls.length=n.length,null==e.controls.selectedIndex&&(e.controls.selectedIndex=0),void 0!=n[e.controls.selectedIndex]&&angular.element(n[e.controls.selectedIndex]).addClass(e.shownClass)})}}}]),angular.module("phi.ui").directive("phiModal",["$document",function(e){return{restrict:"A",link:function(t,n){angular.element(e[0].body).append(n)}}}]),angular.module("phi.ui").directive("phiPosition",["$phiCoordinates",function(e){return{restrict:"A",scope:{},link:function(t,n,i){n.parent().css("position","relative"),n.css("position","absolute"),t.reposition=function(t){var i=e.getBounds(n),o=e.parseAlignmentString(t)||{vertical:"top",horizontal:"left"},l={top:"auto",left:"auto",bottom:"auto",right:"auto",marginTop:0,marginLeft:0};switch(o.vertical){case"top":l.top="10px";break;case"center":l.top="50%",l.marginTop=i.height*-.5+"px";break;case"bottom":l.bottom="10px"}switch(o.horizontal){case"left":l.left="10px";break;case"center":l.left="50%",l.marginLeft=i.width*-.5+"px";break;case"right":l.right="10px"}n.css(l)},i.$observe("phiPosition",function(e){t.reposition(e)})}}}]),angular.module("phi.ui").directive("phiCutout",[function(){return{restrict:"C",link:function(e,t){t.prepend(angular.element('<div class="phi-cutout-ridge"><div></div><div></div><div></div></div>'))}}}]),function(){"use strict";function e(e){function t(t,i){return i.type="checkbox",i.tabIndex=0,t.attr("role",i.type),function(t,i,o,l){function r(e){32===e.which&&(e.preventDefault(),a(e))}function a(e){i[0].hasAttribute("disabled")||t.$apply(function(){u=!u,l.$setViewValue(u,e&&e.type),l.$render()})}function c(){u=l.$viewValue,i.toggleClass(n,u)}var u=!1;e.link.pre(t,{on:angular.noop,0:{}},o,[l]),i.on("click",a).on("keypress",r),l.$render=c}}e=e[0];var n="phi-checked";return{restrict:"E",transclude:!0,require:"?ngModel",template:'<div class="phi-container" phi-ink-ripple phi-ink-ripple-checkbox><div class="phi-icon"></div></div><div ng-transclude class="phi-label"></div>',compile:t}}angular.module("phi.ui").directive("phiCheckbox",["inputDirective",e])}(),angular.module("phi.ui").directive("phiInput",[function(){var e=1;return{restrict:"E",scope:{name:"@",type:"@",label:"@",placeholder:"@",ngModel:"=",ngFocus:"&",ngBlur:"&"},template:'<div><label for="{{elementId}}" ng-bind="label"></label><input type="{{type||\'text\'}}" ng-if="!multiline" placeholder="{{placeholder}}" ng-focus="focus()" ng-blur="blur()" id="{{elementId}}" name="{{name}}" ng-model="$parent.ngModel" ng-disabled="state.disabled" /><textarea ng-if="multiline" placeholder="{{placeholder}}" ng-focus="focus()" ng-blur="blur()" id="{{elementId}}" name="{{name}}" ng-model="$parent.ngModel" ng-disabled="state.disabled" ng-trim="false"></textarea></div><hr />',link:function(t,n,i){t.elementId="phi-input-"+e++,t.floatinglabel="undefined"!=typeof i.floatinglabel&&"false"!==i.floatinglabel&&"0"!==i.floatinglabel,t.multiline="undefined"!=typeof i.multiline&&"false"!==i.multiline&&"0"!==i.multiline,t.state={focused:!1,empty:!0,disabled:"undefined"!=typeof i.disabled&&"false"!==i.disabled&&"0"!==i.disabled},n.toggleClass("phi-input-disabled",t.state.disabled),n.attr("tabindex",-1),n.on("focus",function(){var e=n.find(t.multiline?"textarea":"input");e[0].focus()}),t.focus=function(){t.state.focused=!0,n.toggleClass("phi-input-focused",!0),t.ngFocus()},t.blur=function(){t.state.focused=!1,n.toggleClass("phi-input-focused",!1),t.ngBlur()},t.resizeTextarea=function(){if(t.multiline){var e=n.find("textarea");e.css("height","auto"),e.css("height",Math.max(e[0].scrollHeight,e[0].clientHeight)+"px")}},t.$watch("ngModel",function(e){t.state.empty=void 0==e||!e.length,n.toggleClass("phi-input-empty",t.state.empty),t.resizeTextarea()})}}}]),angular.module("phi.ui").directive("phiMenu",[function(){return{restrict:"E",link:function(){}}}]),angular.module("phi.ui").directive("phiSubmenu",[function(){return{restrict:"E",scope:{label:"@"},transclude:!0,template:'<a class="phi-submenu-label" ng-bind="label" tabindex="0" ng-click="toggle()"></a><div class="phi-submenu-contents" ng-transclude></div>',link:function(e,t){e.setExpanded=function(n){e.expanded=n,e.expanded?(t.attr("expanded","expanded"),t.find("div").find("a").attr("tabindex",0)):(t.removeAttr("expanded"),t.find("div").find("a").attr("tabindex",-1))},e.toggle=function(){e.setExpanded(!e.expanded)},e.setExpanded(!1);for(var n=t.find("a"),i=0;i<n.length;i++)if(void 0!==angular.element(n[i]).attr("active")){e.setExpanded(!0);break}}}}]),angular.module("phi.ui").directive("phiSelect",["$compile","$document","$timeout",function(e,t,n){var i=1;return{restrict:"E",require:"?ngModel",scope:{name:"@",label:"@",ngFocus:"&",ngBlur:"&",onSearch:"&phiOnSearch"},transclude:!0,template:'<div class="phi-select-header" id="{{elementId}}"><div ng-show="!state.expanded" class="phi-select-display" ng-click="expand()"></div><input type="text" ng-show="state.expanded" ng-model="query" tabindex="-1" size="2" /></div><phi-menu ng-transclude phi-tooltip-for="{{elementId}}" phi-tooltip-match="width" phi-visible="{{state.expanded}}" class="phi-visible-slide-bottom phi-texture-paper"></phi-menu>',controller:["$scope",function(e){this.handleOptionClick=function(t){return e.handleOptionClick(t)}}],link:function(e,o,l,r){function a(){var e=c(r.$viewValue);e&&d.html(e.html())}function c(e){for(var t=o.find("phi-option"),n=0;n<t.length;n++){var i=angular.element(t[n]);if(i.attr("value")==e)return i}return null}function u(t){angular.element(t.target).inheritedData("phiSelectId")!=e.elementId&&e.$apply(e.collapse)}o.attr("tabindex",0),e.elementId="phi-select-"+i++,o.data("phiSelectId",e.elementId),o.on("focus",function(){e.expand(),e.$apply()});var d=angular.element(o.find("div")[1]);r.$render=function(){e.$evalAsync(a)},e.query=null,e.state={expanded:!1},e.handleOptionClick=function(t){r.$setViewValue(t.attr("value")),r.$render(),e.collapse()},e.expand=function(){e.state.expanded||(e.query="",e.state.expanded=!0,n(function(){o.find("input")[0].focus()},0),t.bind("click",u))},e.collapse=function(){e.query=null,e.state.expanded=!1,t.unbind("click",u)},e.$watch("query",function(t,n){t!=n&&e.onSearch({query:t})})}}}]),angular.module("phi.ui").directive("phiOption",["$compile","$interpolate",function(){return{restrict:"E",require:"^phiSelect",template:'<a ng-click="select()" ng-transclude></a>',transclude:!0,scope:{},link:function(e,t,n,i){e.select=function(){return i.handleOptionClick(t)}}}}]);