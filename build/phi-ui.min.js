angular.module("phi.ui",["ngAria"]),angular.module("phi.ui").run(["$rootScope","$location",function(e,t){e.$location=t}]),angular.module("phi.ui").service("$phiCoordinates",[function(){return{getBounds:function(e,t){var i=e[0];t=t||i.offsetParent||document.body,t=t[0]||t;var n=i.getBoundingClientRect(),o=t.getBoundingClientRect();return{left:n.left-o.left,top:n.top-o.top,width:n.width,height:n.height}},parseAlignmentString:function(e){if(void 0==e)return null;var t=null,i=null;return-1!=e.indexOf("center")&&(t="center",i="center"),-1!=e.indexOf("top")&&(t="top"),-1!=e.indexOf("bottom")&&(t="bottom"),-1!=e.indexOf("left")&&(i="left"),-1!=e.indexOf("right")&&(i="right"),t&&i?{vertical:t,horizontal:i}:null}}}]),angular.module("phi.ui").directive("phiTooltipFor",["$timeout","$phiCoordinates",function(e,t){return{restrict:"A",scope:{parentId:"@phiTooltipFor",align:"@phiTooltipAlign",origin:"@phiTooltipOrigin"},link:function(i,n,o){i.reposition=function(){n.css("position","absolute");var e=angular.element(document.getElementById(i.parentId)),l=t.getBounds(e),a=t.getBounds(n),r={top:0,left:0},p=t.parseAlignmentString(i.align)||{vertical:"bottom",horizontal:"left"};switch(p.vertical){case"top":r.top+=l.top;break;case"center":r.top+=l.top+l.height/2;break;case"bottom":r.top+=l.top+l.height}switch(p.horizontal){case"left":r.left+=l.left;break;case"center":r.left+=l.left+l.width/2;break;case"right":r.left+=l.left+l.width}var u=t.parseAlignmentString(i.origin)||{vertical:"top",horizontal:"left"};switch(u.vertical){case"bottom":r.top-=a.height;break;case"center":r.top-=a.height/2}switch(u.horizontal){case"right":r.left-=a.width;break;case"center":r.left-=a.width/2}var c={top:r.top+"px",left:r.left+"px",right:"auto",bottom:"auto"};"width"==o.phiTooltipMatch?c.minWidth=l.width+"px":"height"==o.phiTooltipMatch&&(c.minHeight=l.height+"px"),n.css(c)},o.$observe("phiVisible",function(){i.reposition()}),o.$observe("phiTooltipAlign",function(){i.reposition()}),o.$observe("phiTooltipOrigin",function(){i.reposition()}),e(function(){i.reposition(),i.$apply()},200)}}}]),angular.module("phi.ui").directive("phiViewportLeave",["$window","$phiCoordinates","$timeout",function(e,t,i){return{restrict:"A",link:function(n,o,l){i(function(){var e=t.getBounds(o);o.data("phi-viewport-element-top",e.top),o.data("phi-viewport-element-bottom",e.top+e.height)},0);var a=e.scrollY;angular.element(e).bind("scroll",function(){var t=o.data("phi-viewport-element-top"),i=o.data("phi-viewport-element-bottom"),r=null;t>a&&t<=e.scrollY?r={direction:"up"}:a+e.innerHeight>i&&i>=e.scrollY+e.innerHeight&&(r={direction:"down"}),r&&(n.$eval(l.phiViewportLeave,{event:r}),n.$apply()),a=e.scrollY})}}}]),angular.module("phi.ui").directive("phiViewportLeaveEnd",["$window","$phiCoordinates","$timeout",function(e,t,i){return{restrict:"A",link:function(n,o,l){i(function(){var e=t.getBounds(o);o.data("phi-viewport-element-top",e.top),o.data("phi-viewport-element-bottom",e.top+e.height)},0);var a=e.scrollY;angular.element(e).bind("scroll",function(){var t=o.data("phi-viewport-element-top"),i=o.data("phi-viewport-element-bottom"),r=null;i>a&&i<=e.scrollY?r={direction:"up"}:a+e.innerHeight>t&&t>=e.scrollY+e.innerHeight&&(r={direction:"down"}),r&&(n.$eval(l.phiViewportLeaveEnd,{event:r}),n.$apply()),a=e.scrollY})}}}]),angular.module("phi.ui").directive("phiViewportEnter",["$window","$phiCoordinates","$timeout",function(e,t,i){return{restrict:"A",link:function(n,o,l){i(function(){var e=t.getBounds(o);o.data("phi-viewport-element-top",e.top),o.data("phi-viewport-element-bottom",e.top+e.height)},0);var a=e.scrollY;angular.element(e).bind("scroll",function(){var t=o.data("phi-viewport-element-top"),i=o.data("phi-viewport-element-bottom"),r=null;a+e.innerHeight<t&&t<=e.scrollY+e.innerHeight?r={direction:"up"}:a>i&&i>=e.scrollY&&(r={direction:"down"}),r&&(n.$eval(l.phiViewportEnter,{event:r}),n.$apply()),a=e.scrollY})}}}]),angular.module("phi.ui").directive("phiViewportEnterEnd",["$window","$phiCoordinates","$timeout",function(e,t,i){return{restrict:"A",link:function(n,o,l){i(function(){var e=t.getBounds(o);o.data("phi-viewport-element-top",e.top),o.data("phi-viewport-element-bottom",e.top+e.height)},0);var a=e.scrollY;angular.element(e).bind("scroll",function(){var t=o.data("phi-viewport-element-top"),i=o.data("phi-viewport-element-bottom"),r=null;a+e.innerHeight<i&&i<=e.scrollY+e.innerHeight?r={direction:"up"}:a>t&&t>=e.scrollY&&(r={direction:"down"}),r&&(n.$eval(l.phiViewportEnterEnd,{event:r}),n.$apply()),a=e.scrollY})}}}]),angular.module("phi.ui").directive("phiPosition",["$phiCoordinates",function(e){return{restrict:"A",scope:{},link:function(t,i,n){i.parent().css("position","relative"),i.css("position","absolute"),t.reposition=function(t){var n=e.getBounds(i),o=e.parseAlignmentString(t)||{vertical:"top",horizontal:"left"},l={top:"auto",left:"auto",bottom:"auto",right:"auto",marginTop:0,marginLeft:0};switch(o.vertical){case"top":l.top="10px";break;case"center":l.top="50%",l.marginTop=n.height*-.5+"px";break;case"bottom":l.bottom="10px"}switch(o.horizontal){case"left":l.left="10px";break;case"center":l.left="50%",l.marginLeft=n.width*-.5+"px";break;case"right":l.right="10px"}i.css(l)},n.$observe("phiPosition",function(e){t.reposition(e)})}}}]),function(){"use strict";function e(e){function t(t,n){return n.type="checkbox",n.tabIndex=0,t.attr("role",n.type),function(t,n,o,l){function a(e){32===e.which&&(e.preventDefault(),r(e))}function r(e){n[0].hasAttribute("disabled")||t.$apply(function(){u=!u,l.$setViewValue(u,e&&e.type),l.$render()})}function p(){u=l.$viewValue,n.toggleClass(i,u)}var u=!1;e.link.pre(t,{on:angular.noop,0:{}},o,[l]),n.on("click",r).on("keypress",a),l.$render=p}}e=e[0];var i="phi-checked";return{restrict:"E",transclude:!0,require:"?ngModel",template:'<div class="phi-container" phi-ink-ripple phi-ink-ripple-checkbox><div class="phi-icon"></div></div><div ng-transclude class="phi-label"></div>',compile:t}}angular.module("phi.ui").directive("phiCheckbox",["inputDirective",e])}(),angular.module("phi.ui").directive("phiInput",[function(){var e=1;return{restrict:"E",scope:{name:"@",label:"@",ngModel:"=",ngFocus:"&",ngBlur:"&"},template:'<label for="{{elementId}}" ng-bind="label"></label><input type="text" ng-if="!multiline" ng-focus="focus()" ng-blur="blur()" id="{{elementId}}" name="{{name}}" ng-model="$parent.ngModel" ng-disabled="state.disabled" /><textarea          ng-if="multiline"  ng-focus="focus()" ng-blur="blur()" id="{{elementId}}" name="{{name}}" ng-model="$parent.ngModel" ng-disabled="state.disabled" ng-trim="false"></textarea><hr />',link:function(t,i,n){t.elementId="phi-input-"+e++,t.floatinglabel="undefined"!=typeof n.floatinglabel&&"false"!==n.floatinglabel&&"0"!==n.floatinglabel,t.multiline="undefined"!=typeof n.multiline&&"false"!==n.multiline&&"0"!==n.multiline,t.state={focused:!1,empty:!0,disabled:"undefined"!=typeof n.disabled&&"false"!==n.disabled&&"0"!==n.disabled},i.toggleClass("phi-input-disabled",t.state.disabled),i.attr("tabindex",-1),i.on("focus",function(){var e=i.find(t.multiline?"textarea":"input");e[0].focus()}),t.focus=function(){t.state.focused=!0,i.toggleClass("phi-input-focused",!0),t.ngFocus()},t.blur=function(){t.state.focused=!1,i.toggleClass("phi-input-focused",!1),t.ngBlur()},t.resizeTextarea=function(){if(t.multiline){var e=i.find("textarea");e.css("height","auto"),e.css("height",Math.max(e[0].scrollHeight,e[0].clientHeight)+"px")}},t.$watch("ngModel",function(e){t.state.empty=void 0==e||!e.length,i.toggleClass("phi-input-empty",t.state.empty),t.resizeTextarea()})}}}]),angular.module("phi.ui").directive("phiMenu",[function(){return{restrict:"E",link:function(){}}}]),angular.module("phi.ui").directive("phiSubmenu",[function(){return{restrict:"E",scope:{label:"@"},transclude:!0,template:'<a class="phi-submenu-label" ng-bind="label" tabindex="0" ng-click="toggle()"></a><div class="phi-submenu-contents" ng-transclude></div>',link:function(e,t){e.setExpanded=function(i){e.expanded=i,e.expanded?(t.attr("expanded","expanded"),t.find("div").find("a").attr("tabindex",0)):(t.removeAttr("expanded"),t.find("div").find("a").attr("tabindex",-1))},e.toggle=function(){e.setExpanded(!e.expanded)},e.setExpanded(!1);for(var i=t.find("a"),n=0;n<i.length;n++)if(void 0!==angular.element(i[n]).attr("active")){e.setExpanded(!0);break}}}}]),angular.module("phi.ui").directive("phiSelect",["$compile","$document",function(e,t){var i=1;return{restrict:"E",scope:{name:"@",label:"@",error:"@",invalid:"@",disabled:"@",ngModel:"=",ngChange:"&",ngFocus:"&",ngBlur:"&"},transclude:!0,template:'<phi-input id="{{elementId}}" label="{{label}}" name="{{name}}" ng-model="displayValue" ng-focus="focus()" ng-blur="blur()"></phi-input><phi-menu ng-transclude phi-tooltip-for="{{elementId}}" phi-tooltip-match="width" phi-visible="{{state.expanded}}" class="phi-visible-slide-bottom phi-texture-paper"></phi-menu>',controller:["$scope",function(e){this.select=function(t){e.ngModel=t,e.displayValue=t,e.collapse(),e.ngChange()}}],link:function(e,n){e.elementId="phi-select-"+i++,n.data("phiSelectId",e.elementId),n.attr("tabindex",-1),n.on("focus",function(){n.find("phi-input")[0].focus()}),e.state={expanded:!1},e.focus=function(){n.find("input")[0].select(),e.expand(),e.ngFocus()},e.blur=function(){e.displayValue=e.ngModel,e.ngBlur()},e.expand=function(){e.state.expanded||(e.state.expanded=!0,t.bind("click",e.documentClicked))},e.collapse=function(){e.state.expanded=!1,t.unbind("click",e.documentClicked)},e.documentClicked=function(t){angular.element(t.target).inheritedData("phiSelectId")!=e.elementId&&(e.collapse(),e.$apply())},e.$watch("ngModel",function(t){e.displayValue=t})}}}]),angular.module("phi.ui").directive("option",["$compile","$interpolate",function(e,t){return{restrict:"E",require:"^?phiSelect",scope:{},link:function(i,n,o,l){if(l){i.value=o.value,i.selectThis=function(){return l.select(i.value)};var a='<a ng-click="selectThis()">'+t(n.html())(i.$parent)+"</a>",r=e(a)(i);n.replaceWith(r)}}}}]),angular.module("phi.ui").directive("phiCutout",[function(){return{restrict:"C",link:function(e,t){t.prepend(angular.element('<div class="phi-cutout-ridge"><div></div><div></div><div></div></div>'))}}}]);