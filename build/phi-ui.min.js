angular.module("phi.ui",["ngAria"]),angular.module("phi.ui").directive("phiTooltipFor",["$timeout",function(e){return{restrict:"A",scope:{parentId:"@phiTooltipFor",align:"@phiTooltipAlign",origin:"@phiTooltipOrigin"},link:function(i,t,n){i.reposition=function(){t.css("position","absolute");var e=document.getElementById(i.parentId),l=e.getBoundingClientRect(),o=t[0].getBoundingClientRect(),a={top:window.scrollY,left:window.scrollX},r=window.scrollY+o.top-t[0].offsetTop,u=window.scrollX+o.left-t[0].offsetLeft;a.top-=r,a.left-=u,a.top+=15;var p=null,c=null;if(i.origin){var s=i.origin.toLowerCase().split(" ");p=s.length?s[0]:null,c=s.length>1?s[1]:null}switch(p){default:case"top":break;case"bottom":a.top-=o.height;break;case"center":a.top-=o.height/2}switch(c){default:case"left":break;case"right":a.left-=o.width;break;case"center":a.left-=o.width/2}var d=null,h=null;if(i.align){var g=i.align.toLowerCase().split(" ");d=g.length?g[0]:null,h=g.length>1?g[1]:null}switch(d){case"top":a.top+=l.top;break;default:case"bottom":a.top+=l.top+l.height;break;case"center":a.top+=l.top+l.height/2}switch(h){default:case"left":a.left+=l.left;break;case"right":a.left+=l.left+l.width;break;case"center":a.left+=l.left+l.width/2}var f={top:a.top+"px",left:a.left+"px",right:a.right+"px",bottom:a.bottom+"px"};"width"==n.phiTooltipMatch?f.minWidth=l.width+"px":"height"==n.phiTooltipMatch&&(f.minHeight=l.height+"px"),t.css(f)},n.$observe("phiVisible",function(){i.reposition()}),n.$observe("phiTooltipAlign",function(){i.reposition()}),n.$observe("phiTooltipOrigin",function(){i.reposition()}),e(i.reposition,0)}}}]),angular.module("phi.ui").directive("phiCutout",[function(){return{restrict:"A",link:function(e,i){i.prepend(angular.element('<div class="phi-cutout"><div></div><div></div><div></div></div>'))}}}]),angular.module("phi.ui").directive("phiPosition",[function(){return{restrict:"A",link:function(e,i){i.parent().css("position","relative"),i.css({position:"absolute",top:"10px",right:"10px"})}}}]),function(){"use strict";function e(e){function i(i,n){return n.type="checkbox",n.tabIndex=0,i.attr("role",n.type),function(i,n,l,o){function a(e){32===e.which&&(e.preventDefault(),r(e))}function r(e){n[0].hasAttribute("disabled")||i.$apply(function(){p=!p,o.$setViewValue(p,e&&e.type),o.$render()})}function u(){p=o.$viewValue,n.toggleClass(t,p)}var p=!1;e.link.pre(i,{on:angular.noop,0:{}},l,[o]),n.on("click",r).on("keypress",a),o.$render=u}}e=e[0];var t="phi-checked";return{restrict:"E",transclude:!0,require:"?ngModel",template:'<div class="phi-container" phi-ink-ripple phi-ink-ripple-checkbox><div class="phi-icon"></div></div><div ng-transclude class="phi-label"></div>',compile:i}}angular.module("phi.ui").directive("phiCheckbox",["inputDirective",e])}(),angular.module("phi.ui").directive("phiInput",["$timeout",function(e){var i=0;return{restrict:"EA",scope:{name:"@",type:"@",label:"@",error:"@",invalid:"@",disabled:"@",ngModel:"=",ngChange:"&",ngFocus:"&",ngBlur:"&"},template:'<label for="{{id}}" ng-bind="label"></label><input id="{{id}}" ng-if="!multiline" type="text" ng-model="$parent.ngModel" ng-focus="focus()" ng-blur="blur()" ng-change="change()" /><textarea id="{{id}}" ng-if="multiline" name="{{name}}" ng-model="$parent.ngModel" ng-trim="false" ng-focus="focus()" ng-blur="blur()" ng-disabled="disabled == \'true\'" ng-change="change()"></textarea><hr />',link:function(t,n,l){n.attr("tabindex",-1),t.id="phi-input-"+ ++i,t.floatinglabel="undefined"!=typeof l.floatinglabel&&"false"!==l.floatinglabel&&"0"!==l.floatinglabel,t.multiline="undefined"!=typeof l.multiline&&"false"!==l.multiline&&"0"!==l.multiline,t.state={focused:!1,empty:!0},t.focus=function(){t.focused=!0,t.ngFocus(),n.toggleClass("phi-input-focused",!0)},t.blur=function(){t.focused=!1,t.ngBlur(),n.toggleClass("phi-input-focused",!1)},t.change=function(){e(t.ngChange,0)},t.resizeTextarea=function(){if(t.multiline){var e=n.find("textarea");e.css("height","auto"),e.css("height",Math.max(50,e[0].scrollHeight,e[0].clientHeight)+"px")}},t.$watch("ngModel",function(e){t.state.empty=void 0==e||!e.length,n.toggleClass("phi-input-empty",t.state.empty),t.resizeTextarea()})}}}]),angular.module("phi.ui").directive("phiMenu",[function(){return{restrict:"E",link:function(){}}}]),angular.module("phi.ui").directive("phiSubmenu",[function(){return{restrict:"E",scope:{label:"@"},transclude:!0,template:'<a class="phi-submenu-label" ng-bind="label" tabindex="0" ng-click="toggle()"></a><div class="phi-submenu-contents" ng-transclude></div>',link:function(e,i){e.setExpanded=function(t){e.expanded=t,e.expanded?(i.attr("expanded","expanded"),i.find("div").find("a").attr("tabindex",0)):(i.removeAttr("expanded"),i.find("div").find("a").attr("tabindex",-1))},e.toggle=function(){e.setExpanded(!e.expanded)},e.setExpanded(!1);for(var t=i.find("a"),n=0;n<t.length;n++)if(void 0!==angular.element(t[n]).attr("active")){e.setExpanded(!0);break}}}}]),angular.module("phi.ui").directive("phiSelect",["$compile","$document",function(e,i){var t=0;return{restrict:"EA",scope:{name:"@",label:"@",error:"@",invalid:"@",disabled:"@",ngModel:"=",ngChange:"&",ngFocus:"&",ngBlur:"&"},compile:function(n){t++;var l="phi-select-"+t;return function(t,o){o.data("phiSelectId",l),t.options=[];for(var a=n.children(),r=0;r<a.length;r++)option=angular.element(a[r]),t.options.push({label:option.html(),value:option.attr("value")});var u='<phi-input id="'+l+'" label="{{label}}" name="{{name}}" ng-model="currentSearch" ng-focus="focus()" ng-blur="blur()"></phi-input><phi-menu phi-texture="paper" phi-tooltip-for="'+l+'" phi-tooltip-match="width" phi-visible="{{optionsVisible}}" class="phi-visible-slide-bottom"><a ng-repeat="option in options" ng-bind="option.label" ng-click="select(option)" active="{{ngModel == option.value}}"></a></phi-menu>';t.currentSearch=t.ngModel,t.optionsVisible=!1,t.showOptions=function(){t.optionsVisible||(t.optionsVisible=!0,i.bind("click",t.documentClicked))},t.hideOptions=function(){t.optionsVisible=!1,i.unbind("click",t.documentClicked)},t.select=function(e){t.hideOptions(),t.currentSearch=e.label,t.ngModel=e.value,t.ngChange()},t.focus=function(){t.showOptions(),t.ngFocus()},t.blur=function(){t.ngBlur()},t.documentClicked=function(e){angular.element(e.target).inheritedData("phiSelectId")!=l&&(t.hideOptions(),t.$apply())};var p=e(u)(t);o.empty().append(p)}}}}]);