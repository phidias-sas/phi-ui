angular.module("phi.ui",["ngAria"]),angular.module("phi.ui").service("$phiCoordinates",[function(){return{parseAlignmentString:function(e){if(void 0==e)return null;var t=null,i=null;return-1!=e.indexOf("center")&&(t="center",i="center"),-1!=e.indexOf("top")&&(t="top"),-1!=e.indexOf("bottom")&&(t="bottom"),-1!=e.indexOf("left")&&(i="left"),-1!=e.indexOf("right")&&(i="right"),t&&i?{vertical:t,horizontal:i}:null}}}]),angular.module("phi.ui").directive("phiTooltipFor",["$timeout","$phiCoordinates",function(e,t){return{restrict:"A",scope:{parentId:"@phiTooltipFor",align:"@phiTooltipAlign",origin:"@phiTooltipOrigin"},link:function(i,n,o){i.reposition=function(){n.css("position","absolute");var e=document.getElementById(i.parentId),l=e.getBoundingClientRect(),a=n[0].getBoundingClientRect(),r={top:window.scrollY,left:window.scrollX},c=window.scrollY+a.top-n[0].offsetTop,p=window.scrollX+a.left-n[0].offsetLeft;r.top-=c,r.left-=p,r.top+=15;var u=t.parseAlignmentString(i.align)||{vertical:"bottom",horizontal:"left"};switch(u.vertical){case"top":r.top+=l.top;break;case"center":r.top+=l.top+l.height/2;break;case"bottom":r.top+=l.top+l.height}switch(u.horizontal){case"left":r.left+=l.left;break;case"center":r.left+=l.left+l.width/2;break;case"right":r.left+=l.left+l.width}var s=t.parseAlignmentString(i.origin)||{vertical:"top",horizontal:"left"};switch(s.vertical){case"bottom":r.top-=a.height;break;case"center":r.top-=a.height/2}switch(s.horizontal){case"right":r.left-=a.width;break;case"center":r.left-=a.width/2}var d={top:r.top+"px",left:r.left+"px",right:r.right+"px",bottom:r.bottom+"px"};"width"==o.phiTooltipMatch?d.minWidth=l.width+"px":"height"==o.phiTooltipMatch&&(d.minHeight=l.height+"px"),n.css(d)},o.$observe("phiVisible",function(){i.reposition()}),o.$observe("phiTooltipAlign",function(){i.reposition()}),o.$observe("phiTooltipOrigin",function(){i.reposition()}),e(i.reposition,0)}}}]),angular.module("phi.ui").directive("phiPosition",["$phiCoordinates",function(e){return{restrict:"A",link:function(t,i,n){i.css("position","absolute");var o=i[0].getBoundingClientRect(),l={},a=e.parseAlignmentString(n.phiPosition)||{vertical:"top",horizontal:"left"};switch(a.vertical){case"top":l.top="10px";break;case"center":l.top="50%",l.marginTop=o.height*-.5+"px";break;case"bottom":l.bottom="10px"}switch(a.horizontal){case"left":l.left="10px";break;case"center":l.left="50%",l.marginLeft=o.width*-.5+"px";break;case"right":l.right="10px"}i.parent().css("position","relative"),i.css(l)}}}]),angular.module("phi.ui").directive("phiCutout",[function(){return{restrict:"C",link:function(e,t){t.prepend(angular.element('<div class="phi-cutout-ridge"><div></div><div></div><div></div></div>'))}}}]),function(){"use strict";function e(e){function t(t,n){return n.type="checkbox",n.tabIndex=0,t.attr("role",n.type),function(t,n,o,l){function a(e){32===e.which&&(e.preventDefault(),r(e))}function r(e){n[0].hasAttribute("disabled")||t.$apply(function(){p=!p,l.$setViewValue(p,e&&e.type),l.$render()})}function c(){p=l.$viewValue,n.toggleClass(i,p)}var p=!1;e.link.pre(t,{on:angular.noop,0:{}},o,[l]),n.on("click",r).on("keypress",a),l.$render=c}}e=e[0];var i="phi-checked";return{restrict:"E",transclude:!0,require:"?ngModel",template:'<div class="phi-container" phi-ink-ripple phi-ink-ripple-checkbox><div class="phi-icon"></div></div><div ng-transclude class="phi-label"></div>',compile:t}}angular.module("phi.ui").directive("phiCheckbox",["inputDirective",e])}(),angular.module("phi.ui").directive("phiInput",["$timeout",function(e){var t=0;return{restrict:"EA",scope:{name:"@",type:"@",label:"@",error:"@",invalid:"@",disabled:"@",ngModel:"=",ngChange:"&",ngFocus:"&",ngBlur:"&"},template:'<label for="{{id}}" ng-bind="label"></label><input id="{{id}}" ng-if="!multiline" type="text" ng-model="$parent.ngModel" ng-focus="focus()" ng-blur="blur()" ng-change="change()" /><textarea id="{{id}}" ng-if="multiline" name="{{name}}" ng-model="$parent.ngModel" ng-trim="false" ng-focus="focus()" ng-blur="blur()" ng-disabled="disabled == \'true\'" ng-change="change()"></textarea><hr />',link:function(i,n,o){n.attr("tabindex",-1),i.id="phi-input-"+ ++t,i.floatinglabel="undefined"!=typeof o.floatinglabel&&"false"!==o.floatinglabel&&"0"!==o.floatinglabel,i.multiline="undefined"!=typeof o.multiline&&"false"!==o.multiline&&"0"!==o.multiline,i.state={focused:!1,empty:!0},i.focus=function(){i.focused=!0,i.ngFocus(),n.toggleClass("phi-input-focused",!0)},i.blur=function(){i.focused=!1,i.ngBlur(),n.toggleClass("phi-input-focused",!1)},i.change=function(){e(i.ngChange,0)},i.resizeTextarea=function(){if(i.multiline){var e=n.find("textarea");e.css("height","auto"),e.css("height",Math.max(50,e[0].scrollHeight,e[0].clientHeight)+"px")}},i.$watch("ngModel",function(e){i.state.empty=void 0==e||!e.length,n.toggleClass("phi-input-empty",i.state.empty),i.resizeTextarea()})}}}]),angular.module("phi.ui").directive("phiMenu",[function(){return{restrict:"E",link:function(){}}}]),angular.module("phi.ui").directive("phiSubmenu",[function(){return{restrict:"E",scope:{label:"@"},transclude:!0,template:'<a class="phi-submenu-label" ng-bind="label" tabindex="0" ng-click="toggle()"></a><div class="phi-submenu-contents" ng-transclude></div>',link:function(e,t){e.setExpanded=function(i){e.expanded=i,e.expanded?(t.attr("expanded","expanded"),t.find("div").find("a").attr("tabindex",0)):(t.removeAttr("expanded"),t.find("div").find("a").attr("tabindex",-1))},e.toggle=function(){e.setExpanded(!e.expanded)},e.setExpanded(!1);for(var i=t.find("a"),n=0;n<i.length;n++)if(void 0!==angular.element(i[n]).attr("active")){e.setExpanded(!0);break}}}}]),angular.module("phi.ui").directive("phiSelect",["$compile","$document",function(e,t){var i=0;return{restrict:"EA",scope:{name:"@",label:"@",error:"@",invalid:"@",disabled:"@",ngModel:"=",ngChange:"&",ngFocus:"&",ngBlur:"&"},compile:function(n){i++;var o="phi-select-"+i;return function(i,l){l.data("phiSelectId",o),i.options=[];for(var a=n.children(),r=0;r<a.length;r++)option=angular.element(a[r]),i.options.push({label:option.html(),value:option.attr("value")});var c='<phi-input id="'+o+'" label="{{label}}" name="{{name}}" ng-model="currentSearch" ng-focus="focus()" ng-blur="blur()"></phi-input><phi-menu phi-tooltip-for="'+o+'" phi-tooltip-match="width" phi-visible="{{optionsVisible}}" class="phi-visible-slide-bottom phi-texture-paper"><a ng-repeat="option in options" ng-bind="option.label" ng-click="select(option)" active="{{ngModel == option.value}}"></a></phi-menu>';i.currentSearch=i.ngModel,i.optionsVisible=!1,i.showOptions=function(){i.optionsVisible||(i.optionsVisible=!0,t.bind("click",i.documentClicked))},i.hideOptions=function(){i.optionsVisible=!1,t.unbind("click",i.documentClicked)},i.select=function(e){i.hideOptions(),i.currentSearch=e.label,i.ngModel=e.value,i.ngChange()},i.focus=function(){i.showOptions(),i.ngFocus()},i.blur=function(){i.ngBlur()},i.documentClicked=function(e){angular.element(e.target).inheritedData("phiSelectId")!=o&&(i.hideOptions(),i.$apply())};var p=e(c)(i);l.empty().append(p)}}}}]);